(function(a,b){function g(a,d,e){var g=this,h,i,j,k,l,m,n;this.listContainer=c.getElementById(a),this.items=[],this.list=null,this.templateEngines={},this.maxVisibleItemsCount=d.maxVisibleItemsCount||200,i=function(c,d){d.list=d.list||a,d.listClass=d.listClass||"list",d.searchClass=d.searchClass||"search",d.sortClass=d.sortClass||"sort",h=new m(g,d),g.list=f.getByClass(d.listClass,g.listContainer,!0),f.addEvent(f.getByClass(d.searchClass,g.listContainer),"keyup",g.search),n=f.getByClass(d.sortClass,g.listContainer),f.addEvent(n,"click",g.sort);if(d.valueNames){var e=j.get(),i=d.valueNames;d.indexAsync?j.indexAsync(e,i):j.index(e,i)}c!==b&&g.add(c)},j={get:function(){var a=g.list.childNodes,c=[];for(var d=0,e=a.length;d<e;d++)a[d].data===b&&c.push(a[d]);return c},index:function(a,b){for(var c=0,d=a.length;c<d;c++)g.items.push(new l(b,a[c]))},indexAsync:function(a,b){var c=a.splice(0,100);this.index(c,b),a.length>0&&setTimeout(function(){j.indexAsync(a,b)},10)}},this.add=function(a,c){var d=[],e=!1;a[0]===b&&(a=[a]);for(var f=0,i=a.length;f<i;f++){var j=null;a[f]instanceof l?(j=a[f],j.reload()):(e=g.items.length>g.maxVisibleItemsCount?!0:!1,j=new l(a[f],b,e)),e||h.add(j,c),g.items.push(j),d.push(j)}return d};var o=null;this.addAsync=function(a,b){var c=b?b.count||100:100,d=a.splice(0,c);g.add(d,b),a.length>0&&setTimeout(function(){g.addAsync(a,b)},10)},this.remove=function(a,b,c){var d=0;for(var e=0,f=g.items.length;e<f;e++)g.items[e].values()[a]==b&&(h.remove(g.items[e],c),g.items.splice(e,1),f--,d++);return d},this.get=function(a,b){var c=[];for(var d=0,e=g.items.length;d<e;d++){var f=g.items[d];f.values()[a]==b&&c.push(f)}return c.length==0?null:c.length==1?c[0]:c},this.sort=function(a,c){var d=g.items.length,e=null,i=a.target||a.srcElement,j="",l=!1,m="asc",o="desc",c=c||{};i===b?(e=a,l=c.asc||!1):(e=f.getAttribute(i,"data-sort"),l=f.hasClass(i,m)?!1:!0);for(var p=0,s=n.length;p<s;p++)f.removeClass(n[p],m),f.removeClass(n[p],o);l?(i!==b&&f.addClass(i,m),l=!0):(i!==b&&f.addClass(i,o),l=!1),c.sortFunction?c.sortFunction=c.sortFunction:c.sortFunction=function(a,b){return k.alphanum(a.values()[e],b.values()[e],l)},g.items.sort(c.sortFunction),h.clear();for(var p=0,s=g.items.length;p<s;p++)g.maxVisibleItemsCount>p&&h.add(g.items[p])},k={alphanum:function(a,c,d){if(a===b||a===null)a="";if(c===b||c===null)c="";a=a.toString().replace(/&(lt|gt);/g,function(a,b){return b=="lt"?"<":">"}),a=a.replace(/<\/?[^>]+(>|$)/g,""),c=c.toString().replace(/&(lt|gt);/g,function(a,b){return b=="lt"?"<":">"}),c=c.replace(/<\/?[^>]+(>|$)/g,"");var e=this.chunkify(a),f=this.chunkify(c);for(var g=0;e[g]&&f[g];g++)if(e[g]!==f[g]){var h=Number(e[g]),i=Number(f[g]);return d?h==e[g]&&i==f[g]?h-i:e[g]>f[g]?1:-1:h==e[g]&&i==f[g]?i-h:e[g]>f[g]?-1:1}return e.length-f.length},chunkify:function(a){var b=[],c=0,d=-1,e=0,f,g;while(f=(g=a.charAt(c++)).charCodeAt(0)){var h=f==45||f==46||f>=48&&f<=57;h!==e&&(b[++d]="",e=h),b[d]+=g}return b}},this.search=function(a,c){var d=[],e=a.target||a.srcElement;e!==b?a=e.value.toLowerCase():a=a.toLowerCase(),a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var f=!1;c===b&&(f=!0),h.clear();if(a==="")for(var i=0,j=g.items.length;i<j&&i<g.maxVisibleItemsCount;i++)g.items[i].show();else for(var k=0,l=g.items.length;k<l;k++){var m=!1,n=g.items[k];f&&(c=n.values());for(var o in c)if(c.hasOwnProperty(o)&&c[o]!==null){var p=c[o].toString().toLowerCase();a!==""&&p.search(a)>-1&&(m=!0)}m&&d.push(n),m&&g.maxVisibleItemsCount>d.length&&n.show()}return d},this.filter=function(a){var c=[];for(var d=0,e=g.items.length;d<e;d++){var f=g.items[d];a===!1||a===b?(f.show(),c.push(f)):a(f.values())?(c.push(f),f.show()):f.hide()}return c},this.size=function(){return g.items.length},this.clear=function(){h.clear(),g.items=[]},l=function(a,c,d){var e=this,f={},g=function(a,c,d){if(c===b)d?e.values(a,d):e.values(a);else{e.elm=c;var f=h.get(e,a);e.values(f)}};this.values=function(a,c){if(a===b)return f;for(var d in a)a.hasOwnProperty(d)&&(f[d]=a[d]);c!==!0&&h.set(e,e.values())},this.show=function(){h.show(e)},this.hide=function(){h.hide(e)},g(a,c,d)},m=function(a,c){return c.engine===b?c.engine="standard":c.engine=c.engine.toLowerCase(),new g.constructor.prototype.templateEngines[c.engine](a,c)},i(e,d)}var c=a.document,d=a.navigator,e=a.location,f;g.prototype.templateEngines={},g.prototype.templateEngines.standard=function(a,d){var e=f.getByClass(d.listClass,c.getElementById(d.list))[0],g=c.getElementById(d.item),h=this,i={tryItemSourceExists:function(){if(g===null){var a=e.childNodes,c=[];for(var d=0,f=a.length;d<f;d++)if(a[d].data===b){g=a[d];break}}},created:function(a){a.elm===b&&h.create(a)},added:function(a){a.elm.parentNode===null&&h.add(a)}};this.get=function(a,b){i.tryItemSourceExists(),i.created(a);var c={};for(var d=0,e=b.length;d<e;d++)c[b[d]]=f.getByClass(b[d],a.elm)[0].innerHTML;return c},this.set=function(a,b){i.created(a);for(var c in b)if(b.hasOwnProperty(c)){var d=f.getByClass(c,a.elm,!0);d&&(d.innerHTML=b[c])}},this.create=function(a){if(a.elm!==b)return;i.tryItemSourceExists();var c=g.cloneNode(!0);c.id="",a.elm=c,h.set(a,a.values())},this.add=function(a){i.created(a),e.appendChild(a.elm)},this.remove=function(a){e.removeChild(a.elm)},this.show=function(a){i.created(a),i.added(a),e.appendChild(a.elm)},this.hide=function(a){a.elm!==b&&a.elm.parentNode===e&&e.removeChild(a.elm)},this.clear=function(){if(e.hasChildNodes())while(e.childNodes.length>=1)e.removeChild(e.firstChild)}},f={getByClass:function(){return c.getElementsByClassName?function(a,b,c){return c?b.getElementsByClassName(a)[0]:b.getElementsByClassName(a)}:function(a,b,d){var e=[],f="*";b==null&&(b=c);var g=b.getElementsByTagName(f),h=g.length,i=new RegExp("(^|\\s)"+a+"(\\s|$)");for(var j=0,k=0;j<h;j++)if(i.test(g[j].className)){if(d)return g[j];e[k]=g[j],k++}return e}}(),addEvent:function(a,c){if(c.addEventListener)return function(c,d,e){if(c&&!(c instanceof Array)&&!c.length&&!f.isNodeList(c)&&c.length!==0||c===a)c.addEventListener(d,e,!1);else if(c&&c[0]!==b){var g=c.length;for(var h=0;h<g;h++)f.addEvent(c[h],d,e)}};if(c.attachEvent)return function(c,d,e){if(c&&!(c instanceof Array)&&!c.length&&!f.isNodeList(c)&&c.length!==0||c===a)c.attachEvent("on"+d,function(){return e.call(c,a.event)});else if(c&&c[0]!==b){var g=c.length;for(var h=0;h<g;h++)f.addEvent(c[h],d,e)}}}(this,c),getAttribute:function(a,c){var d=a.getAttribute&&a.getAttribute(c)||null;if(!d){var e=a.attributes,f=e.length;for(var g=0;g<f;g++)c[g]!==b&&c[g].nodeName===c&&(d=c[g].nodeValue)}return d},isNodeList:function(a){var b=Object.prototype.toString.call(a);return typeof a=="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(b)&&(a.length==0||typeof node=="object"&&a[0].nodeType>0)?!0:!1},hasClass:function(a,b){var c=this.getAttribute(a,"class");return c.search(b)>-1},addClass:function(a,b){if(!this.hasClass(a,b)){var c=this.getAttribute(a,"class");c=c+" "+b+" ",c=c.replace(/\s{2,}/g," "),a.setAttribute("class",c)}},removeClass:function(a,b){if(this.hasClass(a,b)){var c=this.getAttribute(a,"class");c=c.replace(b,""),a.setAttribute("class",c)}}},a.List=g,a.ListJsHelpers=f})(window);