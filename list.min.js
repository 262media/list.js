function List(c,f,h){var l=this,g=null;this.listContainer=document.getElementById(c);this.items=[];this.list=null;this.templateEngines={};this.maxVisibleItemsCount=200;var k=function(o,q){if(typeof q.list==="undefined"){q.list=c}g=new a(l,q);l.list=ListJsHelpers.getByClass("list",l.listContainer,true);ListJsHelpers.addEvent(ListJsHelpers.getByClass("search",l.listContainer),"keyup",l.search);ListJsHelpers.addEvent(ListJsHelpers.getByClass("sort",l.listContainer),"click",l.sort);if(q.valueNames){var r=e.get(),p=q.valueNames;if(q.indexAsync){e.indexAsync(r,p)}else{e.index(r,p)}}if(typeof o!=="undefined"){l.add(o)}};var n=null;var e={get:function(){var q=l.list.childNodes,p=[];for(var r=0,o=q.length;r<o;r++){if(typeof q[r].data==="undefined"){p.push(q[r])}}return p},index:function(o,q){for(var r=0,p=o.length;r<p;r++){l.items.push(new d(q,o[r]))}},indexAsync:function(o,p){var q=o.splice(0,100);this.index(q,p);if(o.length>0){setTimeout(function(){e.indexAsync(o,p)},10)}else{}}};this.add=function(p,q){var t=[],s=false;if(typeof p[0]==="undefined"){p=[p]}for(var r=0,o=p.length;r<o;r++){var u=null;if(p[r] instanceof d){u=p[r];u.reload()}else{s=(l.items.length>l.maxVisibleItemsCount)?true:false;u=new d(p[r],undefined,s)}if(!s){g.add(u,q)}l.items.push(u);t.push(u)}return t};var b=null;this.addAsync=function(o,p){var q=p?p.count||100:100,r=o.splice(0,q);l.add(r,p);if(o.length>0){setTimeout(function(){l.addAsync(o,p)},10)}else{}};this.remove=function(t,s,p){var r=0;for(var q=0,o=l.items.length;q<o;q++){if(l.items[q].values()[t]===s){g.remove(l.items[q],p);l.items.splice(q,1);o--;r++}}return r};this.get=function(t,r){var s=[];for(var p=0,o=l.items.length;p<o;p++){var q=l.items[p];if(q.values()[t]==r){s.push(q)}}if(s.length==0){return null}else{if(s.length==1){return s[0]}else{return s}}};this.sort=function(u,o){var r=l.items.length,s=null,t=u.target||u.srcElement;if(t==="undefined"){s=u}else{s=ListJsHelpers.getAttribute(t,"rel")}if(o){o=o}else{o=function(w,v){return m.alphanum(w.values()[s],v.values()[s])}}l.items.sort(o);g.clear();for(var q=0,p=l.items.length;q<p;q++){if(l.maxVisibleItemsCount>q){g.add(l.items[q])}}};var m={alphanum:function(p,o){if(typeof p==="undefined"){p=""}if(typeof o==="undefined"){o=""}p=p.toString().replace(/&(lt|gt);/g,function(u,v){return(v=="lt")?"<":">"});p=p.replace(/<\/?[^>]+(>|$)/g,"");o=o.toString().replace(/&(lt|gt);/g,function(u,v){return(v=="lt")?"<":">"});o=o.replace(/<\/?[^>]+(>|$)/g,"");var q=this.chunkify(p);var s=this.chunkify(o);for(x=0;q[x]&&s[x];x++){if(q[x]!==s[x]){var t=Number(q[x]),r=Number(s[x]);if(t==q[x]&&r==s[x]){return t-r}else{return(q[x]>s[x])?1:-1}}}return q.length-s.length},chunkify:function(s){var w=[],p=0,v=-1,u=0,r,q;while(r=(q=s.charAt(p++)).charCodeAt(0)){var o=(r==46||(r>=48&&r<=57));if(o!==u){w[++v]="";u=o}w[v]+=q}return w}};this.search=function(z,p){var u=[],s=z.target||z.srcElement;if(typeof s!=="undefined"){z=s.value.toLowerCase()}else{z=z.toLowerCase()}var o=false;if(typeof p==="undefined"){o=true}g.clear();if(z===""){for(var r=0,t=l.items.length;((r<t)&&(r<l.maxVisibleItemsCount));r++){l.items[r].show()}}else{for(var r=0,t=l.items.length;r<t;r++){var y=false,w=l.items[r];if(o){p=w.values()}for(var q in p){var v=p[q].toString().toLowerCase();if((z!=="")&&(v.search(z)>-1)){y=true}}if(y){u.push(w)}if(y&&(l.maxVisibleItemsCount>u.length)){w.show()}}}return u};this.filter=function(s){var o=[];for(var q=0,p=l.items.length;q<p;q++){var r=l.items[q];if(s===false||typeof s==="undefined"){r.show();o.push(r)}else{if(s(r.values())){o.push(r);r.show()}else{r.hide()}}}return o};this.size=function(){return l.items.length};function d(p,r,q){var s=this,o={};var t=function(v,y,w){if(typeof y==="undefined"){if(w){s.values(v,w)}else{s.values(v)}}else{s.elm=y;var u=g.get(s,v);s.values(u)}};this.values=function(u,v){if(u!==undefined){for(name in u){if(u.hasOwnProperty(name)){o[name]=u[name]}}if(v!==true){g.set(s,s.values())}}else{return o}};this.show=function(){g.show(s)};this.hide=function(){g.hide(s)};t(p,r,q)}var a=function(p,o){if(typeof o.engine==="undefined"){o.engine="standard"}else{o.engine=o.engine.toLowerCase()}return new l.constructor.prototype.templateEngines[o.engine](p,o)};k(h,f)}List.prototype.templateEngines={};List.prototype.templateEngines.standard=function(f,b){var h=ListJsHelpers.getByClass("list",document.getElementById(b.list))[0],d=document.getElementById(b.item),a=this,f=f;this.get=function(o,m){c();e(o);var l={};for(var n=0,k=m.length;n<k;n++){l[m[n]]=ListJsHelpers.getByClass(m[n],o.elm)[0].innerHTML}return l};this.set=function(m,l){e(m);for(var k in l){var n=ListJsHelpers.getByClass(k,m.elm,true);if(n){n.innerHTML=l[k]}}};this.create=function(l){if(typeof l.elm!=="undefined"){return}c();var k=d.cloneNode(true);k.id="";l.elm=k;a.set(l,l.values())};this.add=function(k){e(k);h.appendChild(k.elm)};this.remove=function(k){h.removeChild(k.elm)};this.show=function(k){e(k);g(k);h.appendChild(k.elm)};this.hide=function(k){e(k);h.removeChild(k.elm)};this.clear=function(){if(h.hasChildNodes()){while(h.childNodes.length>=1){h.removeChild(h.firstChild)}}};function c(){if(d===null){var m=h.childNodes,l=[];for(var n=0,k=m.length;n<k;n++){if(typeof m[n].data==="undefined"){d=m[n];break}}}}function e(k){if(typeof k.elm==="undefined"){a.create(k)}}function g(k){if(k.elm.parentNode===null){a.add(k)}}};var ListJsHelpers={getByClass:(function(){if(document.getElementsByClassName){return function(b,a,c){if(c){return a.getElementsByClassName(b)[0]}else{return a.getElementsByClassName(b)}}}else{return function(f,d,g){var c=new Array();if(d==null){d=document}tag="*";var b=d.getElementsByTagName(tag);var a=b.length;var e=new RegExp("(^|\\s)"+f+"(\\s|$)");for(i=0,j=0;i<a;i++){if(e.test(b[i].className)){if(g){return b[i]}else{c[j]=b[i];j++}}}return c}}})(),addEvent:(function(b,a){if(a.addEventListener){return function(g,f,d){if((g&&!(g instanceof Array)&&!g.length&&!ListJsHelpers.isNodeList(g))||g===b){g.addEventListener(f,d,false)}else{if(g&&g[0]!==undefined){var c=g.length;for(var e=0;e<c;e++){ListJsHelpers.addEvent(g[e],f,d)}}}}}else{if(a.attachEvent){return function(g,f,d){if((g&&!(g instanceof Array)&&!g.length&&!ListJsHelpers.isNodeList(g))||g===b){g.attachEvent("on"+f,function(){return d.call(g,b.event)})}else{if(g&&g[0]!==undefined){var c=g.length;for(var e=0;e<c;e++){ListJsHelpers.addEvent(g[e],f,d)}}}}}}})(this,document),getAttribute:function(f,b){var a=(f.getAttribute&&f.getAttribute(b))||null;if(!a){var c=f.attributes;var e=c.length;for(var d=0;d<e;d++){if(b[d].nodeName===b){a=b[d].nodeValue}}}return a},isNodeList:function(b){var a=Object.prototype.toString.call(b);if(typeof b==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(a)&&(b.length==0||(typeof node==="object"&&b[0].nodeType>0))){return true}return false}};