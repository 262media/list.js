(function(f,g){var b=f.document,d=f.navigator,c=f.location;function e(l,t,p){var r=this,o=null;this.listContainer=b.getElementById(l);this.items=[];this.list=null;this.templateEngines={};this.maxVisibleItemsCount=t.maxVisibleItemsCount||200;var q=function(v,y){y.list=y.list||l;y.listClass=y.listClass||"list";y.searchClass=y.searchClass||"search";y.sortClass=y.sortClass||"sort";o=new h(r,y);r.list=a.getByClass(y.listClass,r.listContainer,true);a.addEvent(a.getByClass(y.searchClass,r.listContainer),"keyup",r.search);a.addEvent(a.getByClass(y.sortClass,r.listContainer),"click",r.sort);if(y.valueNames){var z=n.get(),w=y.valueNames;if(y.indexAsync){n.indexAsync(z,w)}else{n.index(z,w)}}if(v!==g){r.add(v)}};var u=null;var n={get:function(){var y=r.list.childNodes,w=[];for(var z=0,v=y.length;z<v;z++){if(y[z].data===g){w.push(y[z])}}return w},index:function(v,y){for(var z=0,w=v.length;z<w;z++){r.items.push(new m(y,v[z]))}},indexAsync:function(v,w){var y=v.splice(0,100);this.index(y,w);if(v.length>0){setTimeout(function(){n.indexAsync(v,w)},10)}else{}}};this.add=function(w,y){var B=[],A=false;if(w[0]===g){w=[w]}for(var z=0,v=w.length;z<v;z++){var C=null;if(w[z] instanceof m){C=w[z];C.reload()}else{A=(r.items.length>r.maxVisibleItemsCount)?true:false;C=new m(w[z],g,A)}if(!A){o.add(C,y)}r.items.push(C);B.push(C)}return B};var k=null;this.addAsync=function(v,w){var y=w?w.count||100:100,z=v.splice(0,y);r.add(z,w);if(v.length>0){setTimeout(function(){r.addAsync(v,w)},10)}else{}};this.remove=function(B,A,w){var z=0;for(var y=0,v=r.items.length;y<v;y++){if(r.items[y].values()[B]==A){o.remove(r.items[y],w);r.items.splice(y,1);v--;z++}}return z};this.get=function(B,z){var A=[];for(var w=0,v=r.items.length;w<v;w++){var y=r.items[w];if(y.values()[B]==z){A.push(y)}}if(A.length==0){return null}else{if(A.length==1){return A[0]}else{return A}}};this.sort=function(A,E){var v=r.items.length,D=null,z=A.target||A.srcElement,y="",C=false;if(z===g){D=A}else{D=a.getAttribute(z,"rel");y=a.getAttribute(z,"sorting");if(y=="asc"){z.setAttribute("sorting","desc");C=false}else{z.setAttribute("sorting","asc");C=true}}if(E){E=E}else{E=function(G,F){return s.alphanum(G.values()[D],F.values()[D],C)}}r.items.sort(E);o.clear();for(var w=0,B=r.items.length;w<B;w++){if(r.maxVisibleItemsCount>w){o.add(r.items[w])}}};var s={alphanum:function(w,v,y){if(w===g){w=""}if(v===g){v=""}w=w.toString().replace(/&(lt|gt);/g,function(D,E){return(E=="lt")?"<":">"});w=w.replace(/<\/?[^>]+(>|$)/g,"");v=v.toString().replace(/&(lt|gt);/g,function(D,E){return(E=="lt")?"<":">"});v=v.replace(/<\/?[^>]+(>|$)/g,"");var z=this.chunkify(w);var B=this.chunkify(v);for(x=0;z[x]&&B[x];x++){if(z[x]!==B[x]){var C=Number(z[x]),A=Number(B[x]);if(y){if(C==z[x]&&A==B[x]){return C-A}else{return(z[x]>B[x])?1:-1}}else{if(C==z[x]&&A==B[x]){return A-C}else{return(z[x]>B[x])?-1:1}}}}return z.length-B.length},chunkify:function(B){var E=[],w=0,D=-1,C=0,A,z;while(A=(z=B.charAt(w++)).charCodeAt(0)){var v=(A==46||(A>=48&&A<=57));if(v!==C){E[++D]="";C=v}E[D]+=z}return E}};this.search=function(G,w){var C=[],A=G.target||G.srcElement;if(A!==g){G=A.value.toLowerCase()}else{G=G.toLowerCase()}var v=false;if(w===g){v=true}o.clear();if(G===""){for(var z=0,B=r.items.length;((z<B)&&(z<r.maxVisibleItemsCount));z++){r.items[z].show()}}else{for(var z=0,B=r.items.length;z<B;z++){var F=false,E=r.items[z];if(v){w=E.values()}for(var y in w){var D=w[y].toString().toLowerCase();if((G!=="")&&(D.search(G)>-1)){F=true}}if(F){C.push(E)}if(F&&(r.maxVisibleItemsCount>C.length)){E.show()}}}return C};this.filter=function(A){var v=[];for(var y=0,w=r.items.length;y<w;y++){var z=r.items[y];if(A===false||A===g){z.show();v.push(z)}else{if(A(z.values())){v.push(z);z.show()}else{z.hide()}}}return v};this.size=function(){return r.items.length};function m(w,z,y){var A=this,v={};var B=function(D,F,E){if(F===g){if(E){A.values(D,E)}else{A.values(D)}}else{A.elm=F;var C=o.get(A,D);A.values(C)}};this.values=function(C,D){if(C!==g){for(name in C){if(C.hasOwnProperty(name)){v[name]=C[name]}}if(D!==true){o.set(A,A.values())}}else{return v}};this.show=function(){o.show(A)};this.hide=function(){o.hide(A)};B(w,z,y)}var h=function(w,v){if(v.engine===g){v.engine="standard"}else{v.engine=v.engine.toLowerCase()}return new r.constructor.prototype.templateEngines[v.engine](w,v)};q(p,t)}e.prototype.templateEngines={};e.prototype.templateEngines.standard=function(o,k){var q=a.getByClass(k.listClass,b.getElementById(k.list))[0],m=b.getElementById(k.item),h=this,o=o;this.get=function(v,t){l();n(v);var s={};for(var u=0,r=t.length;u<r;u++){s[t[u]]=a.getByClass(t[u],v.elm)[0].innerHTML}return s};this.set=function(t,s){n(t);for(var r in s){var u=a.getByClass(r,t.elm,true);if(u){u.innerHTML=s[r]}}};this.create=function(s){if(s.elm!==g){return}l();var r=m.cloneNode(true);r.id="";s.elm=r;h.set(s,s.values())};this.add=function(r){n(r);q.appendChild(r.elm)};this.remove=function(r){q.removeChild(r.elm)};this.show=function(r){n(r);p(r);q.appendChild(r.elm)};this.hide=function(r){n(r);q.removeChild(r.elm)};this.clear=function(){if(q.hasChildNodes()){while(q.childNodes.length>=1){q.removeChild(q.firstChild)}}};function l(){if(m===null){var t=q.childNodes,s=[];for(var u=0,r=t.length;u<r;u++){if(t[u].data===g){m=t[u];break}}}}function n(r){if(r.elm===g){h.create(r)}}function p(r){if(r.elm.parentNode===null){h.add(r)}}};var a={getByClass:(function(){if(b.getElementsByClassName){return function(k,h,l){if(l){return h.getElementsByClassName(k)[0]}else{return h.getElementsByClassName(k)}}}else{return function(o,m,p){var l=new Array();if(m==null){m=b}tag="*";var k=m.getElementsByTagName(tag);var h=k.length;var n=new RegExp("(^|\\s)"+o+"(\\s|$)");for(i=0,j=0;i<h;i++){if(n.test(k[i].className)){if(p){return k[i]}else{l[j]=k[i];j++}}}return l}}})(),addEvent:(function(k,h){if(h.addEventListener){return function(p,o,m){if((p&&!(p instanceof Array)&&!p.length&&!a.isNodeList(p))||p===k){p.addEventListener(o,m,false)}else{if(p&&p[0]!==g){var l=p.length;for(var n=0;n<l;n++){a.addEvent(p[n],o,m)}}}}}else{if(h.attachEvent){return function(p,o,m){if((p&&!(p instanceof Array)&&!p.length&&!a.isNodeList(p))||p===k){p.attachEvent("on"+o,function(){return m.call(p,k.event)})}else{if(p&&p[0]!==g){var l=p.length;for(var n=0;n<l;n++){a.addEvent(p[n],o,m)}}}}}}})(this,b),getAttribute:function(o,k){var h=(o.getAttribute&&o.getAttribute(k))||null;if(!h){var l=o.attributes;var n=l.length;for(var m=0;m<n;m++){if(k[m]!==g){if(k[m].nodeName===k){alert(attar[m]);h=k[m].nodeValue}}}}return h},isNodeList:function(k){var h=Object.prototype.toString.call(k);if(typeof k==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(h)&&(k.length==0||(typeof node==="object"&&k[0].nodeType>0))){return true}return false}};f.List=e;f.ListJsHelpers=a})(window);